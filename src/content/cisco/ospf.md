---
title: "OSPF Configuration"
vendor: "cisco"
feature: "ospf"
category: "routing"
tags: ["ospf", "routing", "lsa", "lsdb"]
tested_on: ["IOS XE 17.x", "IOS 15.x"]
last_verified: 2026-01-19
difficulty: intermediate
description: "Configure and troubleshoot Open Shortest Path First (OSPF) on Cisco routers."
related: ["/cisco/dhcp", "/cisco/cdp"]
---

# Open Shortest Path First (OSPF)

OSPF is a link-state routing protocol that uses the Shortest Path First (SPF) algorithm to calculate the best path to a destination. Routers build a map of the network in their **Link State Database (LSDB)** using **Link State Advertisements (LSAs)**.

---

## Basic Configuration

### 1. Enable OSPF Process
Start the OSPF process and define the networks to participate.
```cisco
R1(config)# router ospf 1
# Activate OSPF on specific interfaces within an area
R1(config-router)# network 192.168.1.0 0.0.0.255 area 0

# Set a unique Router ID (Highly Recommended)
R1(config-router)# router-id 1.1.1.1
```

### 2. Interface Level Configuration
Alternative to the `network` command, you can enable OSPF directly on the interface.
```cisco
R1(config)# interface gigabitEthernet 0/1
R1(config-if)# ip ospf 1 area 0
```

### 3. Passive Interfaces
Stops sending Hello packets on interfaces that don't have OSPF neighbors (e.g., LAN ports) to improve security and efficiency.
```cisco
# Set all as passive by default, then enable specific ones
R1(config-router)# passive-interface default
R1(config-router)# no passive-interface gigabitEthernet 0/0
```

---

## OSPF Metric & Cost

OSPF cost is calculated as: **Reference Bandwidth / Interface Bandwidth**. The default reference bandwidth is **100 Mbps**.

### Change Reference Bandwidth
Must match on all routers in the network to ensure consistent path calculation.
```cisco
# Recommended for Gigabit/10G networks (e.g., 100000 for 100Gbps)
R1(config-router)# auto-cost reference-bandwidth 1000
```

### Manual Cost Override
The manual cost takes priority over the auto-calculated value.
```cisco
R1(config-if)# ip ospf cost 10
```

---

## Verification & Troubleshooting

### View Neighbors & Adjacencies
```cisco
# Check if neighbors have reached the FULL state
R1# show ip ospf neighbor

# Check OSPF interface status and timers
R1# show ip ospf interface brief
```

### View Routing & Database
```cisco
# Check the local LSDB (LSA Type 1, 2, 5, etc.)
R1# show ip ospf database

# View OSPF-learned routes in the RIB
R1# show ip route ospf
```

---

## OSPF Neighbor States

| State | Description |
| :--- | :--- |
| **Down** | No Hello packets received yet. |
| **Init** | Hello received, but local Router ID is not in the neighbor's list. |
| **2-Way** | Bi-directional communication established. DR/BDR election occurs here. |
| **Exstart** | Determining Master/Slave roles to begin LSDB synchronization. |
| **Exchange** | Routers exchange Database Description (DBD) packets. |
| **Loading** | Routers request missing info using LSR and receive updates via LSU. |
| **Full** | LSDBs are synchronized. Full adjacency established. |

---

## OSPF Message Types

| Type | Name | Purpose |
| :--- | :--- | :--- |
| **1** | **Hello** | Neighbor discovery and keepalive maintenance. |
| **2** | **DBD** | Summary of the LSDB to check for synchronization. |
| **3** | **LSR** | Request specific LSAs from a neighbor. |
| **4** | **LSU** | Send the actual LSA details to a neighbor. |
| **5** | **LSAck** | Acknowledge receipt of an LSA. |

---

## DR & BDR Election
On multi-access networks (Broadcast), a **Designated Router (DR)** and **Backup Designated Router (BDR)** are elected to reduce flooding.

### Election Priority
1.  **Highest Interface Priority**: Default is 1. (0 means the router can never be DR/BDR).
2.  **Highest Router ID**: If priorities are tied.

```cisco
# Force a router to become the DR by increasing priority
R1(config-if)# ip ospf priority 255

# Prevent a router from ever being DR
R1(config-if)# ip ospf priority 0
```

---

## OSPF LSA Types (Common)

| LSA Type | Name | Scope | Generated By |
| :--- | :--- | :--- | :--- |
| **Type 1** | **Router LSA** | Intra-Area | Every OSPF router. |
| **Type 2** | **Network LSA** | Intra-Area | The DR on multi-access segments. |
| **Type 5** | **External LSA** | Whole Domain | An ASBR (Redistributed routes). |

---

## Common Neighbor Requirements
Adjacency will fail if any of these do **not** match:
*   Area ID and Area Type (Stub, etc.)
*   Authentication Password/Key
*   Hello and Dead Timers
*   Subnet Mask and MTU (MTU mismatch allows 2-way but stuck in Exstart/Exchange)
*   Unique Router IDs (Must NOT match)

> [!WARNING]
> If a router is stuck in **Exstart/Exchange** state, it is almost always due to an **MTU mismatch** on the connecting interface.
